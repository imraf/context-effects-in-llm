כותרת: מהו תכנות פונקציונלי?
כתובת URL: https://medium.com/swlh/what-is-functional-programming-bef9d2141965
תגיות: JavaScript, פיתוח תוכנה, ES6, תכנות הצהרתי, תכנות פונקציונלי
----------------------------------------
"בשתי הזדמנויות נשאלתי, 'אמור נא, מר באבג', אם תכניס למכונה נתונים שגויים, האם התשובות הנכונות יצאו?'... אינני מסוגל לתפוס נכונה את סוג הבלבול הרעיוני שיכול לעורר שאלה כזו." - צ'ארלס באבג' (1864): ממציא המנוע האנליטי (המקור למחשוב הדיגיטלי)

תכנות פונקציונלי מגדיר פרדיגמת תכנות נוספת מסוג הגישות התכנותיות ה'הצהרתיות' (בניגוד לאימפרטיביות) המוגדרות בתוך מדעי המחשב.

מאמר זה חוקר תכנות פונקציונלי למתחילים, תוך שימוש בשפת JavaScript ES6 הפופולרית מאוד להמחשה.

בקצרה, גישות פונקציונליות לתכנות מוגדרות כיישום והרכבה של פונקציות, בניגוד לגישת ה'שורה אחר שורה' האימפרטיבית לתכנות ששימשה את מדעני המחשב ההיסטוריים, כמו באבג'.

זה דורש מאיתנו לשאול, מהן פונקציות?

Dictionary.com מפרק פונקציה, בהגדרה מתמטית כ...

מיפוי, התאמה, נקרא גם טרנספורמציה של התאמה. יחס בין שתי קבוצות שבו אלמנט אחד מהקבוצה השנייה מוקצה לכל אלמנט מהקבוצה הראשונה, כמו הביטוי y = x^2; אופרטור. https://www.dictionary.com/browse/function

אם לא למדתם מתמטיקה מתקדמת, אולי, מעבר ללימודי החובה, או מדעי המחשב באופן פורמלי (כמוני); כדי לפרק את המשמעות של פונקציות בתכנות; פשוט להבין שאנחנו לוקחים 'קבוצה' של ערכים מוגדרים או 'אובייקטים' של נתונים וממפים או משנים את הנתונים האלה לערך אחר.

אנו קוראים ל'מודול' הכולל שנוצר על ידי שינוי, למשל, 'x ל-y' — פונקציה.

הרשו לי להסביר מעט יותר בהמשך. אני אשתמש בפונקציות JavaScript ES6, אולם אדבוק בצורה אחת של ביטוי פונקציות באמצעות הצהרות פונקציה (ולא פונקציות חץ ואנונימיות), למען הפשטות. אם אתם מעוניינים ללמוד כיצד לכתוב פונקציות בכל הצורות בתוך JavaScript, אני מציע לכם לקחת קורס יסודי בנושא.

מהי פונקציה בשימוש יומיומי?

ניתן לדמיין שהבנתם חלק מהנושאים והתחביר של תכנות מחשבים בשלב זה, אבל אולי אינכם בטוחים מהי פונקציה וכיצד להשתמש בגישה מונעת פונקציות כדי לבצע את צרכי התכנות שלכם.

אם נתקלתם ב-Microsoft Excel בעבר, עם מעט הכשרה, ייתכן שלימדו אתכם כיצד להשתמש בתכונת ה'סכום' (sum) האוטומטית בתוך התוכנה הזו.

תכונה זו מאפשרת למשתמש להדגיש קבוצת תאים המכילים ערכים מספריים ופשוט ללחוץ על כפתור כדי לחשב אוטומטית את ה'סכום' או הסך הכל של כל המספרים הללו.

תכונת ה-SUM של אקסל

באקסל, זה משרת למעשה מטרה כפונקציה שנכתבה מראש. כשאנחנו כותבים =SUM(X) ולוחצים אנטר בתא באקסל, כאשר X הוא הערך/ים שאנחנו רוצים לסכם; המיפוי מ-X ל-Y מתבצע מתחת למכסה המנוע.

אז אולי, באקסל, מה שהרכב הפונקציה או הביטויים של SUM יכולים להיקבע כ-, עשוי להיראות קצת ככה. בשימוש בצילום המסך של אקסל למעלה, הערכים מצוינים בתוך סוגריים...

SUM = (10 + 20 + 30 + 15)

// מחזיר 75

הנ"ל הוא מה שניתן להגדיר כגישה אימפרטיבית לתכנות (ההפך מגישה פונקציונלית). זו הפונקציה מפורקת, כתובה בעמל רב, אך מוגדרת במפורש. בגישה אימפרטיבית, איננו מתייחסים לפונקציות או לבקרת זרימה — אנו פשוט מבצעים הוראות מלמעלה למטה.

מה אם היינו צריכים לבצע את התהליך הזה מבלי להשתמש בתכונת ה-SUM בתוך אקסל עבור מאות או אלפי תאים המכילים ערכים?

הייתה לכם תוכנית מוגדרת בבירור מאוד, כתובה שורה אחר שורה, שמחשבת כל דבר שהגדרתם במפורש, אבל אולי זה היה לוקח פרק זמן ארוך הרבה יותר מאשר פשוט להגדיר מה הפונקציה SUM עושה ואז להשתמש בה פעם אחת, או כמה פעמים שנדרש.

זהו, בליבו, מה שתכנות פונקציונלי עוסק בו...

כדי לסכם את הסמנטיקה של ההגדרה, פונקציה היא בעצם טרנספורמציה של ערכים מ-X ל-Y. כפי שראינו ב-SUM, קבוצה של מספר או מספרים (X) לסך כולל יחיד (Y). כדי להוסיף לזה, בדרך כלל אנו 'מחזירים' ערך (Y) כתוצאה מהפונקציה — כך שהפונקציה משרתת מטרה בתוכנית.

בשפת התכנות, פונקציות בדרך כלל מוצהרות ו'נקראות בשם' — כפי ש-'SUM' הוא השם של חישוב לסכום קבוצה של ערכים בתוך אקסל — בשפות תכנות שונות, אתם יכולים להגדיר פונקציה שתעשה כל חישוב (או טרנספורמציה) שתרצו ותתנו לה שם מתאים.

אנחנו לא מוגבלים רק לסכימת מספרים — אנחנו יכולים לכתוב פונקציות למיזוג מערכים, פירוק אובייקטים, איטרציה וסינון ערכים למבני נתונים חדשים וכן הלאה וכן הלאה, הגבול הוא באמת מה שהשפה מסוגלת לעשות עם מבני הנתונים הנתונים.

מהו 'תכנות' פונקציונלי אם כן? כיצד זה חל על JavaScript ושפות תכנות אחרות?

אם הבנתם, כפי שלמעלה, שפונקציות פשוט 'מפשטות' (abstract) או לוקחות תהליך שגרתי ועוטפות את התהליך הזה בתוך ישות בעלת שם (או במונח טוב יותר — פונקציה מוצהרת) בצורה שמאפשרת שימוש חוזר, בניגוד לחזרה, אז אתם יכולים כנראה לדמיין שכמעט כל תהליך תכנות יכול להפוך לפונקציה.

בואו נמשיך עם ה-SUM מאקסל ונסתכל עליו מתחת למכסה המנוע עם הדוגמה שלי ב-JavaScript. זכרו שפונקציה זו כבר קיימת כחלק ממתודה מובנית בתוך JavaScript. כלומר בעולם האמיתי, אתם לא צריכים לכתוב פונקציה לסכימת ערכים, שכן היא כבר קיימת בתוך השפה הזו.

זו הפרשנות שלי לפונקציית ה-SUM באקסל, כתובה ב-JavaScript ES6

די שימושי — אני לא אפרק את כל זה שורה אחר שורה עבורכם — אבל בקצרה, זה לוקח מערך (קבוצה של ערכים כלומר מבנה נתונים) ועובר בלולאה דרך המערך הזה, מוסיף כל אחד מערכי האלמנטים בתוך המערך למשתנה סך הכל. הפונקציה אז פשוט מחזירה את הסך הכל הזה בסוף תהליך החישוב.

אז החישובים שהתבצעו מתחת למכסה המנוע, אם נפרק את הפונקציה הזו, נראים בערך ככה, אם היינו עושים את זה בצורה אימפרטיבית — שורה אחר שורה...

total = 0;

total = total + 10;

total = total + 20;

...

return total;

נהדר, אז פונקציה היא בעצם קיצור דרך לביצוע קוד שכבר כתבתי שניתן לשימוש חוזר. איך זה עוזר לי כמתכנת?

גישות פונקציונליות לתכנות מאפשרות למפתח או למתכנת, בקצרה, לפרק בעיה גדולה יותר למודולים קטנים יותר שניתן להשתמש בהם שוב כדי לפתור בעיות קטנות ומפורקות בעתיד.

זה משרת את המטרה של פירוק אלגוריתם (אנו יכולים להגדיר באופן רחב את כל התכנות פשוט ככתיבה ופירוק אלגוריתמים) בצורה ניתנת לשימוש חוזר.

איך זה הגיוני בצורה מטאפורית? בואו נכין תוכנית 'אפיית עוגה', שזו המטאפורה הטיפוסית המשמשת להסבר מהו אלגוריתם למתחילים.

שימו לב להבדל בין הגישה הפונקציונלית לבין האימפרטיבית. בעוד שהפונקציונלית ארוכה בכ-20 שורות מהגישה האימפרטיבית — שורה אחר שורה — חשבו תחילה מה היה קורה אם היו לנו לא 10, אלא 100 או 1000 או יותר מרכיבים להוסיף.

השמטתי מהקוד שלי כל צורה של פונקציות עיכוב או תזמון ופשוט הערתי וכתבתי לקונסולה איפה התוכנית צריכה לחכות זמן קבוע.

אלגוריתם אפיית עוגה — פונקציונלי מול אימפרטיבי

הנ"ל הוא אלגוריתם פשוט לאפיית עוגה. בואו נבחן תחילה את הגישה הפונקציונלית ואז נשווה לגישה האימפרטיבית (כזו שאינה משתמשת בפונקציות באופן נרחב).

אפיית עוגה פונקציונלית — מסוכם

מרכיבים מועברים מרשימת מרכיבים למחבת. את מערך המרכיבים ניתן להרחיב למספר עצום של אלמנטים / מרכיבים ופונקציית ה-'addToPan' תעביר את כולם בשמחה מבלי שתצטרכו לכתוב במפורש את ההוראה לעבור מ-a (מערך מרכיבים) ל-b (מערך מחבת). המרכיבים מעורבבים עם פונקציה בשם mix(pan) שלוקחת את המחבת כארגומנט וממיינת את האלמנטים לפי סדר אלפביתי. יש דרכים אחרות למיין (או לערבב) אלמנטים באופן אקראי, אך זה הושמט במאמר זה. ovenSwitch() ממתגת את התנור דולק או כבוי בערך בוליאני של אמת או שקר, כאשר אמת מציינת לנו שהתנור דולק. clean(pan) פשוט מרוקנת את המערך מכל ערך אם הוקצה למשתנה המחבת הגלובלי. bake() — היא פונקציה מסדר גבוה (higher order function). פונקציה מסדר גבוה היא כזו שקוראת לפונקציות אחרות בתוך בלוק הפונקציה שלה. במקרה זה, bake לוקחת את כל הפונקציות שנוצרו קודם לכן ומבצעת איטרציה עליהן בסדר הנכון. התוכנית מבוצעת פשוט על ידי קריאה ל-'bake()' בתחתית, לאחר הבטחה שהמרכיבים הנכונים כלולים בראש התוכנית בתוך מערך המרכיבים.

עכשיו, לגישה הפונקציונלית, כמו למעלה, יש הסתייגות.

בתחילה, בזמן הצהרת הפונקציות הללו וכתיבת קוד לשימוש חוזר — עבור מקרי שימוש קטנים, כגון באפיית עוגה המכילה רק 8 מרכיבים; זה עשוי להיות למעשה מהיר יותר לכתוב בדרך אימפרטיבית, כמו למטה, תוך שימת לב שבסיס הקוד קצר הרבה יותר.

הגישה האימפרטיבית — כמו למעלה — נראית פשוטה יותר באופן מטעה וקלה יותר לפרשנות. עם זאת, שימו לב במיוחד לקונספט של הוספת (x) מרכיבים למחבת.

אם זו הייתה תוכנית מתקדמת יותר שלוקחת קבוצה אקראית של מרכיבים ממסד נתונים המיוצגת על ידי מערך באורך משתנה בתוך התוכנית הזו, למשל אחת עם 100 או 1001 מרכיבים, אז המתכנת היה צריך להעביר כל אחד מהמרכיבים האלה, כמו למעלה, אחד אחד, לתוך המחבת.

תכנות פונקציונלי מסוכם

אנחנו יודעים עכשיו מהי פונקציה, לאחר שהגדרנו אותה כמתודה בעלת שם או מוצהרת לשינוי נתונים מ-x ל-y. הסתכלנו על דוגמאות, כמו פונקציית ה-SUM בתוך אקסל, שמסכמת טווח של מספרים במידת הצורך.

זה חוסך את הצורך לחשב את התהליך המפורק של סכימת כל ערך אחד אחד.

הסתכלנו על השוואות בין תכנות אימפרטיבי לפונקציונלי באמצעות אלגוריתם אפיית עוגה, עם שפת JavaScript. זה הדגיש שלמרות שתכנות פונקציונלי הוא הגישה האידיאלית להתמודדות עם קוד שצפוי לחזור על עצמו, ישנן הסתייגויות, שבמקרי שימוש קטנים עשוי להיות קל יותר לכתוב בסגנון אימפרטיבי יותר.

בסופו של דבר, עם זאת, נקיטת גישה פונקציונלית לתכנות מבטיחה שהקוד שלכם יהיה ניתן להתאמה למערכי נתונים (או קלטים) משתנים. המשמעות היא שעם בסיס קוד פונקציונלי, סביר להניח שתיתקלו פחות בבעיה של חזרה וטעות אנוש, שעשויות להתרחש אם נמנעתם מהגדרת פונקציות כדי לפרק את אתגר התכנות הכולל שלכם.

אם מצאתם את המאמר הזה מעניין ותרצו לקרוא עוד על גישת תכנות אחרת שבונה על הגישה הפונקציונלית ומקדמת אותה, אנא קראו את המאמר שלי למטה — 'מהו תכנות מונחה עצמים?'
